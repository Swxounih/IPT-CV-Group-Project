# CV Management System - Search Functionality Fix

## Files Added/Modified

### New Files Created:
1. **search_ajax.php** - Handles AJAX search requests from the search page
2. **view_resume.php** - Displays a specific CV/resume based on ID
3. **save_resume.php** - Saves all session data to database before preview
4. **database_structure.sql** - SQL file to create all necessary database tables

### Modified Files:
1. **references.php** - Updated to redirect to save_resume.php instead of preview.php

## Installation Instructions

### Step 1: Database Setup
1. Open phpMyAdmin or MySQL command line
2. Run the SQL commands from `database_structure.sql` to create all tables
3. Verify that all tables are created with proper foreign key relationships

### Step 2: File Upload
Upload all files to your web server:
- All PHP files (including the new ones)
- CSS files
- Make sure the `uploads/` directory exists and has write permissions (chmod 755)

### Step 3: Configuration
1. Open `config.php`
2. Verify database credentials:
   - DB_HOST = 'localhost'
   - DB_USER = 'root'
   - DB_PASS = '' (or your password)
   - DB_NAME = 'ipt_group_project'

### Step 4: Testing

#### Test CV Creation:
1. Go to: `http://yoursite.com/index.php`
2. Click "Create your own CV"
3. Fill in all the forms through each step
4. Click "Preview Resume" on the References page
5. Verify your resume displays correctly
6. Use "Print / Save as PDF" to save your CV

#### Test Search Functionality:
1. Go to: `http://yoursite.com/search-create.php`
2. Click the "Search" tab at the top
3. Enter a search term (name, email, skill, etc.)
4. Click "Search" button
5. Results should display as clickable cards
6. Click on a result to view the full resume

## How the Search Works

### Search Features:
- Searches across multiple fields:
  - Given name
  - Middle name  
  - Surname
  - Email
  - Phone number
  - Address
  - Skills
  
- Real-time AJAX search (no page reload)
- Click on any result to view the full CV
- Responsive design for mobile devices

### Search Flow:
1. User enters search term → `search-create.php`
2. JavaScript sends AJAX request → `search_ajax.php`
3. PHP queries database using prepared statements
4. Returns JSON results
5. JavaScript displays results as clickable cards
6. Click card → redirects to `view_resume.php?id=X`
7. Displays full CV with all sections

## File Structure

```
/your-project/
├── index.php              (Entry point - redirects to search-create.php)
├── config.php             (Database configuration)
├── search-create.php      (Main page with search interface)
├── search_ajax.php        (NEW - Handles search queries)
├── view_resume.php        (NEW - Displays individual CV)
├── save_resume.php        (NEW - Saves session data to database)
├── personal-information.php
├── career-objectives.php
├── education.php
├── work-experience.php
├── skills.php
├── interests.php
├── references.php         (MODIFIED)
├── preview.php
├── sidebar-nav.php
├── sidebar.css
├── database_structure.sql (NEW - Database schema)
└── uploads/               (Directory for profile photos)
```

## Troubleshooting

### Search Returns No Results:
- Verify database has data: Run `SELECT * FROM personal_information;`
- Check database connection in `config.php`
- Open browser console (F12) to see JavaScript errors
- Check that `search_ajax.php` is accessible

### Can't Save Resume:
- Verify all database tables exist
- Check file permissions on uploads directory
- Review PHP error logs
- Make sure `save_resume.php` is in the same directory

### Profile Photos Not Displaying:
- Create `uploads/` directory if it doesn't exist
- Set permissions: `chmod 755 uploads`
- Verify file paths in database

### 404 Errors:
- Verify all PHP files are uploaded
- Check file names match exactly (case-sensitive on Linux)
- Ensure .htaccess allows PHP execution

## Database Tables Overview

1. **personal_information** - Main user info (name, contact, etc.)
2. **career_objectives** - Career goals and objectives
3. **education** - Educational background entries
4. **work_experience** - Work history entries
5. **skills** - Skills and competency levels
6. **interests** - Hobbies and interests
7. **reference** - Professional references

All tables use foreign keys linking to `personal_information.id` with CASCADE delete.

## Security Notes

- Uses prepared statements to prevent SQL injection
- Input sanitization with htmlspecialchars()
- File upload validation for photos
- Session-based data storage before DB commit

## Browser Compatibility

- Chrome/Edge (recommended)
- Firefox
- Safari
- Mobile browsers (responsive design)

## Support

If you encounter issues:
1. Check PHP error logs
2. Enable error reporting in PHP: `error_reporting(E_ALL);`
3. Verify MySQL connection
4. Check browser console for JavaScript errors
5. Ensure all files were uploaded correctly
